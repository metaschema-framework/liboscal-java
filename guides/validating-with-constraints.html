<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M19 from src/site/markdown/guides/validating-with-constraints.md.vm at 2026-01-12
 | Rendered using Apache Maven Fluido Skin 2.0.0-M9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M19" />
    <title>Validating with Constraints â€“ OSCAL Java API</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.0.0-M9.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.0.0-M9.min.js"></script>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" crossorigin="anonymous" />
      <link rel="stylesheet" href="./css/custom.css" />
    <style>.github-fork-ribbon:before { background-color: black; }</style>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/metaschema-framework/liboscal-java" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href=".././">OSCAL Java API Project</a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="projectVersion">Version: 7.0.0<span class="divider">|</span></li>
      <li><a href="../">OSCAL Java</a><span class="divider">/</span></li>
    <li class="active">Validating with Constraints <a href="https://github.com/metaschema-framework/liboscal-java/tree/develop/src/site/markdown/guides/validating-with-constraints.md.vm"><img src="../images/accessories-text-editor.png" alt="Edit" /></a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Main</li>
    <li><a>Home</a></li>
    <li><a href="https://github.com/metaschema-framework/liboscal-java/tree/develop" class="externalLink">GitHub</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="../installation.html">Installation</a></li>
    <li><a href="../building.html">Building</a></li>
    <li><a href="../claude-integration.html">Claude Integration</a></li>
    <li><a href="../guides/architecture.html">Architecture</a></li>
   <li class="nav-header">Guides</li>
    <li><a href="../guides/loading-oscal-modules.html">Binding Context</a></li>
    <li><a href="../guides/reading-writing-data.html">Reading &amp; Writing Data</a></li>
    <li><a href="../guides/resolving-profiles.html">Resolving Profiles</a></li>
    <li><a href="../guides/executing-metapath.html">Executing Metapath</a></li>
    <li class="active"><a>Validating with Constraints</a></li>
    <li><a href="../guides/architecture.html">Architecture</a></li>
   <li class="nav-header">Contribute</li>
    <li><a href="https://github.com/metaschema-framework/liboscal-java/tree/develop/CONTRIBUTING.md" class="externalLink">Contribute</a></li>
    <li><a href="https://github.com/metaschema-framework/liboscal-java/issues" class="externalLink">Issues</a></li>
   <li class="nav-header">Maven Documentation</li>
    <li><a href="../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="$sitesearchValue" name="sitesearch" type="hidden" />
  <input class="search-query" name="q" id="query" type="text" placeholder="Search with Google..." />
</form>
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Validating_with_Constraints"></a>
<h1>Validating with Constraints</h1>
<p>This guide explains how to validate OSCAL documents using Metaschema constraints.</p>
<p>Metaschema constraints provide validation beyond schema compliance:</p>
<ul>

<li><strong>Cardinality</strong> - Required fields, maximum occurrences</li>
<li><strong>Allowed values</strong> - Enumerated value restrictions</li>
<li><strong>Patterns</strong> - Regex-based validation</li>
<li><strong>Uniqueness</strong> - Key constraints within scopes</li>
<li><strong>Cross-references</strong> - Reference integrity</li>
<li><strong>Custom rules</strong> - Metapath-based assertions</li>
</ul>

<pre><code class="language-java">import dev.metaschema.databind.io.DeserializationFeature;
import dev.metaschema.databind.io.IBoundLoader;
import dev.metaschema.oscal.lib.OscalBindingContext;
import dev.metaschema.oscal.lib.model.Catalog;

import java.nio.file.Path;

OscalBindingContext context = OscalBindingContext.instance();
IBoundLoader loader = context.newBoundLoader();

// Enable constraint validation during loading
loader.enableFeature(DeserializationFeature.DESERIALIZE_VALIDATE_CONSTRAINTS);

Catalog catalog = loader.load(Catalog.class, Path.of(&quot;catalog.json&quot;));
</code></pre>

<pre><code class="language-java">import dev.metaschema.core.model.validation.IValidationResult;
import dev.metaschema.oscal.lib.OscalBindingContext;

import java.net.URI;
import java.nio.file.Path;

OscalBindingContext context = OscalBindingContext.instance();
URI target = Path.of(&quot;catalog.json&quot;).toUri();

// Validate against constraints
IValidationResult result = context.validateWithConstraints(target, null);

if (!result.isPassing()) {
    result.getFindings().forEach(finding -&gt; {
        System.err.println(finding.getSeverity() + &quot;: &quot; +
            finding.getMessage());
    });
}
</code></pre>

<pre><code class="language-java">import dev.metaschema.core.model.constraint.IConstraint.Level;
import dev.metaschema.core.model.validation.IValidationFinding;
import dev.metaschema.core.model.validation.IValidationResult;
import dev.metaschema.oscal.lib.OscalBindingContext;

import java.net.URI;
import java.nio.file.Path;

OscalBindingContext context = OscalBindingContext.instance();
URI target = Path.of(&quot;catalog.json&quot;).toUri();

IValidationResult result = context.validateWithConstraints(target, null);

// Check if validation passed
if (result.isPassing()) {
    System.out.println(&quot;Validation passed&quot;);
} else {
    System.out.println(&quot;Validation failed&quot;);
}

// Process findings
for (IValidationFinding finding : result.getFindings()) {
    System.out.println(String.format(&quot;[%s] %s at %s&quot;,
        finding.getSeverity(),
        finding.getMessage(),
        finding.getLocation()));
}
</code></pre>
<table class="table table-striped">
<thead>
<tr class="a">
<th>Severity</th>
<th>Meaning</th></tr></thead><tbody>
<tr class="b">
<td><code>CRITICAL</code></td>
<td>Severe error, document unusable</td></tr>
<tr class="a">
<td><code>ERROR</code></td>
<td>Constraint violation</td></tr>
<tr class="b">
<td><code>WARNING</code></td>
<td>Potential issue, may be intentional</td></tr>
<tr class="a">
<td><code>INFORMATIONAL</code></td>
<td>Note for awareness</td></tr></tbody>
</table>

<p>The framework provides <code>FindingCollectingConstraintValidationHandler</code> for collecting validation findings:</p>

<pre><code class="language-java">import dev.metaschema.core.model.constraint.FindingCollectingConstraintValidationHandler;
import dev.metaschema.core.model.constraint.IConstraint.Level;

// The handler implements IValidationResult
FindingCollectingConstraintValidationHandler handler =
    new FindingCollectingConstraintValidationHandler();

// After validation completes, check results
if (!handler.isPassing()) {
    handler.getFindings().forEach(finding -&gt; {
        System.err.println(finding.getSeverity() + &quot;: &quot; +
            finding.getMessage());
    });
}

// Check highest severity level
Level highestSeverity = handler.getHighestSeverity();
if (highestSeverity.ordinal() &gt;= Level.ERROR.ordinal()) {
    System.err.println(&quot;Validation failed with errors&quot;);
}
</code></pre>

<pre class="prettyprint"><code>ERROR: Required field 'title' is missing at /catalog/metadata
</code></pre>
<p><strong>Fix:</strong> Add the required metadata title:</p>

<pre><code class="language-json">{
  &quot;catalog&quot;: {
    &quot;metadata&quot;: {
      &quot;title&quot;: &quot;My Catalog&quot;
    }
  }
}
</code></pre>

<pre class="prettyprint"><code>ERROR: Value 'not-a-uuid' is not a valid UUID at /catalog/uuid
</code></pre>
<p><strong>Fix:</strong> Use a valid UUID v4 format.</p>

<pre class="prettyprint"><code>ERROR: Reference 'control-999' not found at /profile/modify/set-parameters/0/param-id
</code></pre>
<p><strong>Fix:</strong> Ensure referenced elements exist.</p>

<pre class="prettyprint"><code>ERROR: Value 'unknown' is not allowed for property 'status' at /catalog/controls/0/props/0
</code></pre>
<p><strong>Fix:</strong> Use allowed values defined by constraints.</p>

<pre><code class="language-java">import dev.metaschema.oscal.lib.model.SystemSecurityPlan;

IDeserializer&lt;SystemSecurityPlan&gt; deserializer = context.newDeserializer(
    Format.JSON, SystemSecurityPlan.class);
deserializer.setConstraintValidationEnabled(true);

SystemSecurityPlan ssp = deserializer.deserialize(Path.of(&quot;ssp.json&quot;));
</code></pre>

<pre><code class="language-java">import dev.metaschema.oscal.lib.model.Profile;

// Note: Profile validation includes checking import references
IDeserializer&lt;Profile&gt; deserializer = context.newDeserializer(
    Format.JSON, Profile.class);
deserializer.setConstraintValidationEnabled(true);

Profile profile = deserializer.deserialize(Path.of(&quot;profile.json&quot;));
</code></pre>

<pre><code class="language-java">public class OscalValidator {

    public static void main(String[] args) {
        if (args.length &lt; 1) {
            System.err.println(&quot;Usage: java OscalValidator &lt;file&gt;&quot;);
            System.exit(2);
        }

        Path file = Path.of(args[0]);
        OscalBindingContext context = OscalBindingContext.instance();

        try {
            IDeserializer&lt;Catalog&gt; deserializer = context.newDeserializer(
                Format.valueOf(file), Catalog.class);
            deserializer.setConstraintValidationEnabled(true);

            Catalog catalog = deserializer.deserialize(file);
            IValidationResult result = context.validate(catalog);

            if (result.isPassing()) {
                System.out.println(&quot;Validation passed&quot;);
                System.exit(0);
            } else {
                result.getFindings().forEach(f -&gt;
                    System.err.println(f.getSeverity() + &quot;: &quot; + f.getMessage()));
                System.exit(1);
            }
        } catch (Exception e) {
            System.err.println(&quot;Error: &quot; + e.getMessage());
            System.exit(2);
        }
    }
}
</code></pre>
<ol style="list-style-type: decimal;">

<li><strong>Validate early</strong> - Check documents as soon as they're loaded</li>
<li><strong>Log all findings</strong> - Even warnings may indicate issues</li>
<li><strong>Fail fast on errors</strong> - Don't process invalid documents</li>
<li><strong>Report locations</strong> - Include XPath/JSON Pointer for debugging</li>
<li><strong>Consider severity</strong> - Some warnings may be acceptable</li>
</ol>
<blockquote>

<p><strong>Note:</strong> Metaschema constraint validation is experimental. Some constraints may not be fully enforced. Schema-level validation (well-formedness, structure) is stable.</p>
</blockquote>
<p>Continue learning about liboscal-java with these related guides:</p>
<ul>

<li><a href="reading-writing-data.html">Reading &amp; Writing Data</a> - Load documents for validation</li>
<li><a href="executing-metapath.html">Executing Metapath</a> - Query validated content</li>
<li><a href="architecture.html">Architecture</a> - Understand the validation pipeline</li>
</ul></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>
