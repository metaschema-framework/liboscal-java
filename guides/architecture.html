<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M19 from src/site/markdown/guides/architecture.md.vm at 2026-01-12
 | Rendered using Apache Maven Fluido Skin 2.0.0-M9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M19" />
    <title>Architecture â€“ OSCAL Java API</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.0.0-M9.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.0.0-M9.min.js"></script>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" crossorigin="anonymous" />
      <link rel="stylesheet" href="./css/custom.css" />
    <style>.github-fork-ribbon:before { background-color: black; }</style>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/metaschema-framework/liboscal-java" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href=".././">OSCAL Java API Project</a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="projectVersion">Version: 7.0.0<span class="divider">|</span></li>
      <li><a href="../">OSCAL Java</a><span class="divider">/</span></li>
    <li class="active">Architecture <a href="https://github.com/metaschema-framework/liboscal-java/tree/develop/src/site/markdown/guides/architecture.md.vm"><img src="../images/accessories-text-editor.png" alt="Edit" /></a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Main</li>
    <li><a>Home</a></li>
    <li><a href="https://github.com/metaschema-framework/liboscal-java/tree/develop" class="externalLink">GitHub</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="../installation.html">Installation</a></li>
    <li><a href="../building.html">Building</a></li>
    <li><a href="../claude-integration.html">Claude Integration</a></li>
    <li class="active"><a>Architecture</a></li>
   <li class="nav-header">Guides</li>
    <li><a href="../guides/loading-oscal-modules.html">Binding Context</a></li>
    <li><a href="../guides/reading-writing-data.html">Reading &amp; Writing Data</a></li>
    <li><a href="../guides/resolving-profiles.html">Resolving Profiles</a></li>
    <li><a href="../guides/executing-metapath.html">Executing Metapath</a></li>
    <li><a href="../guides/validating-with-constraints.html">Validating with Constraints</a></li>
    <li class="active"><a>Architecture</a></li>
   <li class="nav-header">Contribute</li>
    <li><a href="https://github.com/metaschema-framework/liboscal-java/tree/develop/CONTRIBUTING.md" class="externalLink">Contribute</a></li>
    <li><a href="https://github.com/metaschema-framework/liboscal-java/issues" class="externalLink">Issues</a></li>
   <li class="nav-header">Maven Documentation</li>
    <li><a href="../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="$sitesearchValue" name="sitesearch" type="hidden" />
  <input class="search-query" name="q" id="query" type="text" placeholder="Search with Google..." />
</form>
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Architecture"></a>
<h1>Architecture</h1>
<p>This guide explains the architecture and module structure of liboscal-java.</p>
<p>liboscal-java is built on top of the <a href="https://github.com/metaschema-framework/metaschema-java" class="externalLink">Metaschema Java Tools</a> framework. It provides OSCAL-specific functionality while leveraging the general-purpose Metaschema capabilities for serialization, validation, and querying.</p>
<p>Understanding the architecture helps you work effectively with the library, especially when debugging issues or extending its capabilities. The library follows a layered design where each layer builds on the capabilities provided by the layer below.</p>
<p>This section describes how the library is organized and relates to its dependencies.</p>
<p>The following diagram shows how liboscal-java relates to the underlying Metaschema framework and the OSCAL model definitions:</p>

<pre class="prettyprint"><code>liboscal-java
    &#x2502;
    &#x251c;&#x2500;&#x2500; metaschema-databind (data binding, serialization)
    &#x2502;   &#x251c;&#x2500;&#x2500; metaschema-core (Metaschema model, Metapath)
    &#x2502;   &#x2514;&#x2500;&#x2500; metaschema-model (module loading)
    &#x2502;
    &#x2514;&#x2500;&#x2500; OSCAL Metaschema modules (generated model classes)
        &#x251c;&#x2500;&#x2500; oscal_catalog
        &#x251c;&#x2500;&#x2500; oscal_profile
        &#x251c;&#x2500;&#x2500; oscal_mapping
        &#x251c;&#x2500;&#x2500; oscal_ssp
        &#x251c;&#x2500;&#x2500; oscal_component-definition
        &#x251c;&#x2500;&#x2500; oscal_assessment-plan
        &#x251c;&#x2500;&#x2500; oscal_assessment-results
        &#x2514;&#x2500;&#x2500; oscal_poam
</code></pre>
<p>The library's Java packages are organized by functionality. The main entry point is <code>OscalBindingContext</code>, and all OSCAL model classes live under the <code>model</code> subpackage:</p>

<pre class="prettyprint"><code>dev.metaschema.oscal.lib
&#x251c;&#x2500;&#x2500; OscalBindingContext       # Central entry point
&#x251c;&#x2500;&#x2500; model/                    # Generated OSCAL model classes
&#x2502;   &#x251c;&#x2500;&#x2500; Catalog
&#x2502;   &#x251c;&#x2500;&#x2500; Profile
&#x2502;   &#x251c;&#x2500;&#x2500; MappingCollection
&#x2502;   &#x251c;&#x2500;&#x2500; SystemSecurityPlan
&#x2502;   &#x251c;&#x2500;&#x2500; ComponentDefinition
&#x2502;   &#x251c;&#x2500;&#x2500; AssessmentPlan
&#x2502;   &#x251c;&#x2500;&#x2500; AssessmentResults
&#x2502;   &#x2514;&#x2500;&#x2500; PlanOfActionAndMilestones
&#x251c;&#x2500;&#x2500; profile/
&#x2502;   &#x2514;&#x2500;&#x2500; resolver/             # Profile resolution
&#x2502;       &#x2514;&#x2500;&#x2500; ProfileResolver
&#x2514;&#x2500;&#x2500; metapath/
    &#x2514;&#x2500;&#x2500; function/
        &#x2514;&#x2500;&#x2500; library/          # OSCAL-specific Metapath functions
            &#x2514;&#x2500;&#x2500; OscalFunctionLibrary
</code></pre>
<p>The following sections describe the main classes you'll interact with when using the library.</p>
<p>The <code>OscalBindingContext</code> is your starting point for all OSCAL operations. It provides factory methods for creating serializers, deserializers, and validators:</p>

<pre><code class="language-java">OscalBindingContext context = OscalBindingContext.instance();

// Create readers/writers
IDeserializer&lt;Catalog&gt; reader = context.newDeserializer(Format.JSON, Catalog.class);
ISerializer&lt;Catalog&gt; writer = context.newSerializer(Format.JSON, Catalog.class);

// Access Metapath support
StaticContext staticCtx = context.getStaticContext();
</code></pre>
<p><strong>Responsibilities:</strong></p>
<ul>

<li>Load OSCAL Metaschema modules</li>
<li>Register OSCAL-specific Metapath functions</li>
<li>Provide serialization/deserialization factories</li>
<li>Manage constraint validation</li>
</ul>
<p>Rather than hand-writing Java classes for each OSCAL element, the library generates them from the official OSCAL Metaschema definitions. This ensures the Java model always matches the OSCAL specification:</p>

<pre class="prettyprint"><code>oscal/src/main/metaschema/
    &#x251c;&#x2500;&#x2500; oscal_catalog_metaschema.xml
    &#x251c;&#x2500;&#x2500; oscal_profile_metaschema.xml
    &#x2514;&#x2500;&#x2500; ...
        &#x2193; (maven-metaschema-plugin)
target/generated-sources/metaschema/
    &#x2514;&#x2500;&#x2500; dev/metaschema/oscal/lib/model/
        &#x251c;&#x2500;&#x2500; Catalog.java
        &#x251c;&#x2500;&#x2500; Profile.java
        &#x2514;&#x2500;&#x2500; ...
</code></pre>
<p>One of the most important OSCAL operations is profile resolution&#x2014;converting a profile (which references controls in external catalogs) into a standalone resolved catalog. The <code>ProfileResolver</code> class handles this:</p>

<pre><code class="language-java">ProfileResolver resolver = new ProfileResolver();
Catalog resolved = resolver.resolve(profile);
</code></pre>
<p><strong>Resolution steps:</strong></p>
<ol style="list-style-type: decimal;">

<li>Load imported catalogs/profiles</li>
<li>Apply control selections</li>
<li>Apply modifications</li>
<li>Merge controls from multiple imports</li>
<li>Generate resolved catalog</li>
</ol>
<p>The library extends the base Metapath expression language with OSCAL-specific functions. These are automatically registered when you use <code>OscalBindingContext</code>:</p>
<table class="table table-striped">
<thead>
<tr class="a">
<th>Function</th>
<th>Purpose</th></tr></thead><tbody>
<tr class="b">
<td><code>has-oscal-namespace</code></td>
<td>Check namespace membership</td></tr>
<tr class="a">
<td><code>resolve-profile</code></td>
<td>Resolve profile imports</td></tr>
<tr class="b">
<td><code>resolve-reference</code></td>
<td>Resolve internal references</td></tr></tbody>
</table>

<p>Understanding how data flows through the system helps when debugging issues or optimizing performance. This section traces the path of data through the major operations.</p>
<p>When you deserialize an OSCAL document, the library detects the format, parses the content, and maps it to Java objects:</p>

<pre class="prettyprint"><code>File/URL
    &#x2193;
Format Detection (XML/JSON/YAML)
    &#x2193;
Parser (Jackson/StAX)
    &#x2193;
Metaschema Databind (unmarshalling)
    &#x2193;
Generated Model Objects
    &#x2193;
Optional: Constraint Validation
    &#x2193;
Application Code
</code></pre>
<p>Serialization is the reverse process&#x2014;converting your Java objects back to XML, JSON, or YAML:</p>

<pre class="prettyprint"><code>Model Objects
    &#x2193;
Metaschema Databind (marshalling)
    &#x2193;
Serializer (Jackson/StAX)
    &#x2193;
Format Output (XML/JSON/YAML)
    &#x2193;
File/Stream
</code></pre>
<p>Profile resolution is more complex because it may involve loading external resources and applying multiple transformations:</p>

<pre class="prettyprint"><code>Profile (with imports)
    &#x2193;
Load Referenced Catalogs/Profiles (recursive)
    &#x2193;
Apply Selections (include/exclude)
    &#x2193;
Apply Modifications (parameters, alterations)
    &#x2193;
Merge Controls
    &#x2193;
Resolved Catalog
</code></pre>
<p>This section describes how the library integrates with the Metaschema ecosystem and how you can extend it.</p>
<p>liboscal-java extends the base Metaschema framework with OSCAL-specific functionality. The following table shows how the library maps to Metaschema components:</p>
<table class="table table-striped">
<thead>
<tr class="a">
<th>Metaschema Component</th>
<th>liboscal-java Usage</th></tr></thead><tbody>
<tr class="b">
<td><code>IBindingContext</code></td>
<td><code>OscalBindingContext</code> extends it</td></tr>
<tr class="a">
<td><code>IDeserializer</code></td>
<td>Load OSCAL documents</td></tr>
<tr class="b">
<td><code>ISerializer</code></td>
<td>Write OSCAL documents</td></tr>
<tr class="a">
<td><code>MetapathExpression</code></td>
<td>Query OSCAL content</td></tr>
<tr class="b">
<td><code>IConstraintValidationHandler</code></td>
<td>Validate constraints</td></tr></tbody>
</table>

<p>The library provides hooks for adding custom functionality without modifying the core code.</p>
<p>You can extend the Metapath query language with domain-specific functions. This is useful when you need operations that aren't provided by the built-in function library:</p>

<pre><code class="language-java">// Register custom function
context.registerFunction(myCustomFunction);
</code></pre>
<p>To customize how constraint violations are reported or handled, implement your own validation handler. This allows integration with logging frameworks, custom error reporting, or workflow systems:</p>

<pre><code class="language-java">IConstraintValidationHandler handler = new MyHandler();
deserializer.setConstraintValidationHandler(handler);
</code></pre>
<p>This section covers topics important when deploying applications that use the library.</p>
<p>When using the library in multi-threaded applications, understanding which components are thread-safe helps avoid subtle bugs. The general pattern is to share the context but create fresh serializers and deserializers for each operation:</p>
<ul>

<li><code>OscalBindingContext.instance()</code> is thread-safe for reading configuration</li>
<li>Deserializers are single-use (create new per operation)</li>
<li>Serializers are single-use (create new per operation)</li>
<li>Model objects are not thread-safe for concurrent modification</li>
</ul>
<p>The following example shows the recommended pattern for parallel processing:</p>

<pre><code class="language-java">// Good: Shared context, per-operation deserializers
OscalBindingContext context = OscalBindingContext.instance();

executor.submit(() -&gt; {
    IDeserializer&lt;Catalog&gt; reader = context.newDeserializer(Format.JSON, Catalog.class);
    Catalog catalog = reader.deserialize(path);
    // process catalog
});
</code></pre>
<p>OSCAL documents can vary significantly in size, from small component definitions to comprehensive catalogs like NIST SP 800-53. Keep these factors in mind when working with larger documents:</p>
<ul>

<li>Large catalogs (SP 800-53) can consume significant memory when fully loaded</li>
<li>Consider streaming approaches for very large documents if you only need to process portions</li>
<li>Profile resolution loads the entire import chain into memory, which can be substantial for profiles with deep import hierarchies</li>
</ul>
<p>The library uses Maven for its build process. A key step is the automatic generation of Java model classes from the OSCAL Metaschema definitions. This ensures the Java API always matches the official OSCAL specification:</p>

<pre class="prettyprint"><code>1. Compile Metaschema Sources
   &#x2193;
2. Generate Java Model Classes (maven-metaschema-plugin)
   &#x2193;
3. Compile Generated + Handwritten Java
   &#x2193;
4. Run Tests
   &#x2193;
5. Package JAR
</code></pre>
<p>If you're building from source, the generated classes appear in <code>target/generated-sources/metaschema/</code> and are automatically included in the compilation.</p>
<p>liboscal-java is part of a larger ecosystem of tools for working with OSCAL and Metaschema. Understanding these relationships helps when you need to trace issues or find additional capabilities:</p>
<table class="table table-striped">
<thead>
<tr class="a">
<th>Project</th>
<th>Relationship</th></tr></thead><tbody>
<tr class="b">
<td><a href="https://github.com/metaschema-framework/metaschema-java" class="externalLink">metaschema-java</a></td>
<td>Core framework dependency</td></tr>
<tr class="a">
<td><a href="https://github.com/metaschema-framework/oscal-cli" class="externalLink">oscal-cli</a></td>
<td>CLI built on liboscal-java</td></tr>
<tr class="b">
<td><a href="https://github.com/usnistgov/OSCAL" class="externalLink">OSCAL</a></td>
<td>Source Metaschema definitions</td></tr></tbody>
</table>

<p>Continue learning about liboscal-java with these related guides:</p>
<ul>

<li><a href="loading-oscal-modules.html">Loading OSCAL Modules</a> - Get started with the context</li>
<li><a href="reading-writing-data.html">Reading &amp; Writing Data</a> - Work with documents</li>
<li><a href="../installation.html">Installation</a> - Add to your project</li>
</ul></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>
